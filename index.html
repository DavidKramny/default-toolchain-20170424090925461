<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Foosbuzz by slkaczma</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Foosbuzz</h1>
        <h2>A Raspberry Pi wired Foosball table that uses the Watson IoT Foundation, Cloudant, and Node-RED</h2>
        <a href="https://github.com/slkaczma/FoosBuzz" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h2>

<p>This foosball table started out as something equivalent to a teaming project as we brought five people together in Austin, TX to retrofit an existing table with the sensors needed to track goals.  Version 2 of the code in this GitHub repo is a complete revamp and rethinking of that project to improve it's demo quality and appearance.  Feel free to let us know what you add to the app.  This is a very basic example of using Node-RED to work with an MQTT broker and a noSQL database.  </p>

<h2>
<a id="why-node-red" class="anchor" href="#why-node-red" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Why Node-RED?</h2>

<p>This table was conceived as a demo and nothing is more appealing than a visual interface.  So while there are plenty of wires and flows that could have been improved in raw code, this particular app is meant to visually guide a user through the logic as well.  Node-RED is a great wire framing platform and available on a variety of operating systems.  </p>

<h2>
<a id="technologies" class="anchor" href="#technologies" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Technologies</h2>

<ul>
<li><a href="https://developer.ibm.com/iotfoundation/">Watson IoT Foundation</a></li>
<li><a href="https://cloudant.com/">Cloudant noSQL</a></li>
<li><a href="http://nodered.org/">Node-RED</a></li>
<li><a href="http://expressjs.com/">Express/Node.js</a></li>
<li><a href="http://passportjs.org/">Passport OAuth</a></li>
<li><a href="https://apps.twitter.com/">Twitter</a></li>
</ul>

<h3>
<a id="hardware-suggested-parts-and-tips-for-fitting-your-foosball-table" class="anchor" href="#hardware-suggested-parts-and-tips-for-fitting-your-foosball-table" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Hardware: Suggested Parts and Tips for Fitting Your Foosball Table</h3>

<h4>
<a id="the-basics" class="anchor" href="#the-basics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Basics</h4>

<ul>
<li>Two Sets of Break Beam Sensors (Adafruit currently has the best option out there): <a href="Adafruit">https://www.adafruit.com/products/2168</a>
</li>
<li>A Raspberry Pi 3 Kit (You need the memory card, a mountable case, a power supply, and the Pi): <a href="http://www.amazon.com/CanaKit-Raspberry-Complete-Starter-Kit/dp/B01C6Q2GSY?ie=UTF8&amp;psc=1&amp;redirect=true&amp;ref_=ox_sc_act_title_1&amp;smid=A30ZYR2W3VAJ0A">CanaKit Raspberry Pi 3</a>
</li>
<li>An arcade push button (We purchased ours from Fry's): <a href="http://www.amazon.com/Arcade-Buttons-Multicade-Choice-Colors/dp/B016ZSCOJU/ref=sr_1_3?ie=UTF8&amp;qid=1458770680&amp;sr=8-3&amp;keywords=arcade+push+button+blue">http://www.amazon.com/Arcade-Buttons-Multicade-Choice-Colors/dp/B016ZSCOJU/ref=sr_1_3?ie=UTF8&amp;qid=1458770680&amp;sr=8-3&amp;keywords=arcade+push+button+blue</a>
</li>
</ul>

<h4>
<a id="wiring" class="anchor" href="#wiring" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Wiring</h4>

<p>Now for the wiring particulars we have a few suggested routes, but do what works best with your skill set.</p>

<p>You either can splice wires with female headers or solder headers onto the wires: <a href="http://www.amazon.com/TOOGOO-Female-Solderless-Flexible-Breadboard/dp/B00HUH9GOC/ref=sr_1_1?ie=UTF8&amp;qid=1458770795&amp;sr=8-1&amp;keywords=female+to+female+wires">Female Headers</a>.  We went the splicing route.</p>

<p>You can use some cat 5/4 pair cable (ethernet cable) to splice the wires and make a common ground and power otherwise you'll need a lot of single strand copper wire.  We used four pair cable and kept a common ground and power with a separate data for each goal.  Total wiring is 5 ground, 4 power, and 3 data between the two sensors and the button.</p>

<p>If you're familiar with wiring then skip the soldering and buy some heat shrink wire <a href="http://www.elecdirect.com/butt-splice-heat-shrink-terminals-crimp-shrink-12-10ga-25pk?gclid=CjwKEAjww9O3BRDp1tq0jIP023YSJAB0-j1S1JUElzwio4ogohwFYLGEh8nma9iw-keqoVBC6fMOsRoC2vXw_wcB">butts</a>. You can also twist the wires to splice then and apply electrical tape.  Or skip straight to soldering and stop reading these instructions. </p>

<h4>
<a id="the-table" class="anchor" href="#the-table" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Table</h4>

<p>Tables differ vastly across geography.  Our table is a <a href="http://www.foosballsoccer.com/cyclone-ii.html">Tornado Cyclone II</a>.  You can use whatever table you like with the caveat that you need a large enough return chute to place the sensors where the ball will both hit and not cause a large amount of sensor damage. </p>

<h4>
<a id="tips-for-installing" class="anchor" href="#tips-for-installing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Tips for Installing</h4>

<ul>
<li>Breadboard the sensors and button before you start installing.</li>
<li>Set the python code on the Pi to autostart at boot so you can install it and leave it.</li>
<li>If this is going to be used at a conference or other large event where lots of big cellphones are going to be clogging the air then secure a wired connection. </li>
<li>Install the break beam sensors towards the floor of the chute and slightly back from the goal to ensure the ball crosses. </li>
</ul>

<h3>
<a id="cloudant-and-starter-documents" class="anchor" href="#cloudant-and-starter-documents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Cloudant and Starter Documents</h3>

<p>The app uses an instance of Cloudant running in <a href="https://console.ng.bluemix.net/catalog/">IBM Bluemix</a>.  The application also makes use of the Cloudant nodes so if you choose to deviate from Cloudant then you will need to recode the database sections. </p>

<p>After deploying the application confirm that the players, games, and nodered databases exist.  Confirm that two documents exist in the games database with _ids of totalGames and 1. </p>

<p>Example Game Document: </p>

<pre><code>{
  "_id": "1",
  "_rev": "1-d6afc36ecfefdbb4af0b53211c1501ff",
  "userTeamOne": "Anonymous",
  "idTeamOne": null,
  "userTeamOnePhoto": null,
  "userTeamTwo": "Incognito",
  "idTeamTwo": null,
  "userTeamTwoPhoto": null,
  "goalsTeamOne": 4,
  "goalsTeamTwo": 5,
  "startTime": "Fri Mar 11 2016 17:27:35 GMT+0000 (UTC)",
  "endTime": "Fri Mar 11 2016 17:32:40 GMT+0000 (UTC)",
  "lastBall": "2016-03-11T17:32:38.912Z",
  "currentBall": "2016-03-11T17:32:40.534Z",
  "gameActive": false
}
</code></pre>

<p>Example Player Document: </p>

<pre><code>{
  "_id": "3061923715",
  "_rev": "43-49357dbbf375e47cf1e1cd7826a377d5",
  "handle": "Heres__Ollie",
  "name": "Oliver Rodriguez",
  "photo": "https://pbs.twimg.com/profile_images/573244648291885057/qXxCD2am.jpeg",
  "gamesWon": 2,
  "gamesLost": 0,
  "pointsFor": 10,
  "pointsAgainst": 6,
  "lastPlayed": "Fri Mar 11 2016 21:12:41 GMT+0000 (UTC)",
  "lastGame": "33"
}
</code></pre>

<h3>
<a id="express-server-and-node-red" class="anchor" href="#express-server-and-node-red" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Express Server and Node-RED</h3>

<p>Weâ€™ve crafted some handsome templates for you to use. Go ahead and click 'Continue to layouts' to browse through them. You can easily go back to edit your page before publishing. After publishing your page, you can revisit the page generator and switch to another theme. Your Page content will be preserved.</p>

<h3>
<a id="user-interface" class="anchor" href="#user-interface" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>User Interface</h3>

<h3>
<a id="authors-and-contributors" class="anchor" href="#authors-and-contributors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>Version two of this code is the collaboration of <a href="https://github.com/slkaczma" class="user-mention">@slkaczma</a> and <a href="https://github.com/odrodrig" class="user-mention">@odrodrig</a> for SXSW 2016. </p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/slkaczma/FoosBuzz/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/slkaczma/FoosBuzz/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/slkaczma/FoosBuzz"></a> is maintained by <a href="https://github.com/slkaczma">slkaczma</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
